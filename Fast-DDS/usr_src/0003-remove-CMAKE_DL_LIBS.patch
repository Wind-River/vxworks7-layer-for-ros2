From 7af2e1a1c99688526caf4eb0e2577f2677fb6e93 Mon Sep 17 00:00:00 2001
From: Andrei Kholodnyi <andrei.kholodnyi@gmail.com>
Date: Mon, 13 Dec 2021 14:03:48 +0100
Subject: [PATCH 3/8] remove CMAKE_DL_LIBS

---
 src/cpp/CMakeLists.txt | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/cpp/CMakeLists.txt b/src/cpp/CMakeLists.txt
index 278a8befd..493ab040b 100644
--- a/src/cpp/CMakeLists.txt
+++ b/src/cpp/CMakeLists.txt
@@ -427,7 +427,7 @@ find_package(Atomic MODULE)
 
 # Link library to external libraries.
 target_link_libraries(${PROJECT_NAME} ${PRIVACY} fastcdr foonathan_memory
-    ${CMAKE_THREAD_LIBS_INIT} ${CMAKE_DL_LIBS}
+    ${CMAKE_THREAD_LIBS_INIT} $<$<NOT:$<BOOL:${VXWORKS}>>:${CMAKE_DL_LIBS}>
     ${TINYXML2_LIBRARY}
     $<$<BOOL:${LINK_SSL}>:OpenSSL::SSL$<SEMICOLON>OpenSSL::Crypto$<$<BOOL:${WIN32}>:$<SEMICOLON>crypt32.lib>>
     $<$<BOOL:${WIN32}>:iphlpapi$<SEMICOLON>Shlwapi>
-- 
2.25.1

